<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employees Messages Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/styles/Employees-Messages.css">
</head>
<body>
    
    <br>
    
    <div class="top">
        <nav>
            
           <div class="buttons">
                <a href="main">Requests</a>
                <a href="progress">Progress</a>
                <a href="messages" id="active"> Messages</a>
           </div>
           <center>
                <div class="note">
                    <img src="/images/bell.svg" alt="bell">
                </div>
           </center>
           <center>
                    <div class="avatar">
                        <img src="/images/person.png" alt="avatar">
                    </div>
           </center>

        </nav>
    </div>


    <div class="containerx">
        <div class="title">
            <h2>Messages</h2>
            <h5>These are direct messages from management tailored specifically for you!</h5>
        </div>
    </div>

    <div class="wrapper">

        <div class="requests">

            <div class="accordion" id="accordionExample">

              <% if(messages.length < 1) { %>
                    <center>
                      <br>
                      <br>
                      <h4>No Data Found</h4>
                    </center>
              <% } %>


                  <% messages.forEach((note, index) => { %>
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="heading<%= index %>">
                            <button 
                                class="accordion-button collapsed" 
                                type="button" 
                                data-bs-toggle="collapse" 
                                data-bs-target="#collapse<%= index %>" 
                                aria-expanded="false" 
                                aria-controls="collapse<%= index %>">
                                <h5><%= note.title %></h5>
                                <hr>
                                <h5><i><%= new Date(note.created_at).toLocaleString() %></i></h5>
                            </button>
                        </h2>
                        <div 
                            id="collapse<%= index %>" 
                            class="accordion-collapse collapse" 
                            aria-labelledby="heading<%= index %>" 
                            data-bs-parent="#accordionExample">
                            <div class="accordion-body">
                                <%= note.message %>
                            </div>
                        </div>
                    </div>
                    <br>
                <% }) %>
            


              </div>





        </div>


    </div>
    <br>
    <br>

    <form action="/employees/logout" method="post">
      <button type="submit" id="logout">
          <img src="/images/logout.png" alt="logout">
              Logout
      </button>
     </form>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
